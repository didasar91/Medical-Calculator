<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Medis - Murni Teguh Memorial Hospital</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="mode-psi">
    <div class="container">
        <div class="header-container">
            <img src="https://github.com/didasar91/PSI-Score-Calculator/blob/main/header.jpg?raw=true" alt="Murni Teguh" class="header-image">
        </div>

        <div class="screen-only menu-container">
            <button onclick="showCalculator('psi')" id="btn-psi" class="btn-tab active">PSI Score</button>
            <button onclick="showCalculator('natrium')" id="btn-natrium" class="btn-tab">Koreksi Natrium</button>
        </div>

        <div class="patient-total-wrapper">
            <div class="patient-info">
                <div class="info-line"><span class="label">Nama</span><span>:</span><span id="displayNama">-</span></div>
                <div class="info-line"><span class="label">No. MR</span><span>:</span><span id="displayNoMR">-</span></div>
                <div class="info-line"><span class="label">Tgl Lahir</span><span>:</span><span id="displayTglLahir">-</span></div>
                <div class="info-line"><span class="label">Umur</span><span>:</span><span id="displayUmur">-</span></div>
                <div class="info-line"><span class="label">Tgl Assessment</span><span>:</span><span id="displayTglAsesmen">-</span></div>
            </div>

            <div id="psi-output-box" class="total-section">
                <div class="total-line"><span class="total-label">PSI Score:</span><span id="totalScore">0</span></div>
                <div class="total-line"><span class="total-label">Kelas Risiko:</span><span id="kelasRisiko">-</span></div>
                <div class="total-line"><span class="total-label">Mortality:</span><span id="mortalityRate">-</span></div>
            </div>
            
            <div id="natrium-output-box" class="total-section" style="display:none; border-color: #2196F3; background: #e3f2fd;">
                <div class="total-line"><span class="total-label">Δ Na+ (1L):</span><span id="displayDelta">0</span> mEq/L</div>
                <div class="total-line"><span class="total-label">Kebutuhan:</span><span id="displayBotol">0</span> Botol</div>
            </div>
        </div>

        <div class="input-form screen-only">
            <div class="form-group"><label>Nama Pasien*:</label><input type="text" id="nama"></div>
            <div class="form-group"><label>No. MR (10 Digit)*:</label><input type="text" id="noMR" maxlength="10"></div>
            <div class="form-group"><label>Tanggal Lahir*:</label><input type="date" id="tglLahir"></div>
            <div class="form-group"><label>Jenis Kelamin*:</label><select id="jk"><option value="">Pilih</option><option value="L">Laki-laki</option><option value="P">Perempuan</option></select></div>
            <div class="form-group"><label>Tgl Assessment*:</label><input type="date" id="tglAsesmen"></div>
            <div class="form-group"><label>Berat Badan (kg)*:</label><input type="number" id="bb"></div>
        </div>

        <div id="calc-psi-content">
            <h2 class="form-title">Pneumonia Severity Index Checklist</h2>
            <div class="psi-tables">
                <table class="scoring-table">
                    <thead><tr><th>Kriteria Penilaian</th><th class="score-col">Skor</th></tr></thead>
                    <tbody>
                        <tr class="section-head"><td colspan="2">Faktor Demografik</td></tr>
                        <tr><td>Usia</td><td class="score-col" id="scoreUsia">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="10" data-id="panti"> Penghuni Panti Werda (+10)</label></td><td class="score-col" id="scorePanti">0</td></tr>
                        </tbody>
                </table>
            </div>
        </div>

        <div id="calc-natrium-content" style="display:none;">
            <h2 class="form-title">Koreksi Hiponatremia (Adrogué-Madias)</h2>
            <div class="input-form screen-only">
                <div class="form-group"><label>Na+ Serum (mEq/L):</label><input type="number" id="naSerum"></div>
                <div class="form-group"><label>Target Δ Na+/24j:</label><input type="number" id="targetNa" value="8"></div>
                <div class="form-group"><label>Jenis Cairan Infus:</label>
                    <select id="naInfus">
                        <option value="513">NaCl 3% (513 mEq/L)</option>
                        <option value="154">NaCl 0.9% (154 mEq/L)</option>
                        <option value="77">NaCl 0.45% (77 mEq/L)</option>
                    </select>
                </div>
            </div>
            <div class="natrium-result-table">
                <table class="scoring-table">
                    <thead><tr><th>Parameter Koreksi</th><th>Hasil Perhitungan</th></tr></thead>
                    <tbody>
                        <tr><td>Total Body Water (TBW)</td><td><span id="txtTBW">0</span> L</td></tr>
                        <tr><td>Δ Na+ Serum per 1 Liter Cairan</td><td><span id="txtDelta">0</span> mEq/L</td></tr>
                        <tr><td>Total Volume Cairan Dibutuhkan</td><td><span id="txtTotalVol">0</span> mL</td></tr>
                        <tr style="background:#e3f2fd; font-weight:bold;"><td>Kebutuhan Botol Sediaan (500 mL)</td><td><span id="txtBotolDisplay">0 Botol</span></td></tr>
                        <tr style="background:#fffde7;"><td>Kecepatan Pemberian Infus</td><td><span id="txtKecepatan">0</span> mL/jam</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="dpjp-section">
            <p>Diketahui oleh,</p>
            <input type="text" id="inputDPJP" placeholder="Nama Dokter" class="screen-only dpjp-input">
            <div id="displayDPJP" class="dpjp-name"></div>
        </div>

        <div class="screen-only button-container">
            <button onclick="printAndDownload()" class="btn-action btn-print">Print / Save PDF</button>
            <button onclick="location.reload()" class="btn-action btn-clear">Clear / Reset All</button>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
